<div class="login-container">
    <div class="login-logo">
        <img src="/assets/logo/logo.png" alt="AdFuture">
    </div>
    <h1 class="login-title">Đăng nhập</h1>
    <p class="login-subtitle">Chào mừng trở lại AdFuture Admin</p>
    
    <form id="loginForm">
        <div class="form-group">
            <label class="form-label">Tên đăng nhập</label>
            <input type="text" id="username" class="form-input" placeholder="Nhập tên đăng nhập" required>
        </div>
        <div class="form-group">
            <label class="form-label">Mật khẩu</label>
            <input type="password" id="password" class="form-input" placeholder="Nhập mật khẩu" required>
        </div>
        <button type="submit" class="login-btn">
            <i class="fa-solid fa-right-to-bracket"></i> Đăng nhập
        </button>
    </form>
    
    <div class="login-footer">
        <a href="/">← Quay về trang chủ</a>
    </div>
</div>

<script>
document.getElementById('loginForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const btn = document.querySelector('.login-btn');
    btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Đang xử lý...';
    btn.disabled = true;
    
    try {
        const res = await axios({
            method: "post",
            url: "/api/admin/auth/login",
            data: {
                userName: document.getElementById('username').value,
                password: document.getElementById('password').value
            },
            headers: { "Content-Type": "multipart/form-data" }
        });
        
        if (res.data && res.data.data) {
            localStorage.setItem('token', String(res.data.data));
            window.location.href = "/admin/dashboard";
        } else {
            alert('Sai tên đăng nhập hoặc mật khẩu');
            btn.innerHTML = '<i class="fa-solid fa-right-to-bracket"></i> Đăng nhập';
            btn.disabled = false;
        }
    } catch (error) {
        alert('Có lỗi xảy ra, vui lòng thử lại');
        btn.innerHTML = '<i class="fa-solid fa-right-to-bracket"></i> Đăng nhập';
        btn.disabled = false;
    }
});
</script>
